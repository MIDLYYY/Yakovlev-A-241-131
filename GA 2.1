// ПОДКЛЮЧЕНИЕ БИБЛИОТЕК
#include <iostream>       // Библиотека для ввода/вывода данных (cin, cout, endl)
#include <cstdlib>        // Библиотека для работы со стандартными функциями C (rand(), srand())
#include <ctime>          // Библиотека для работы со временем (time(), clock())
#include <iomanip>        // Библиотека для форматирования вывода (setw(), fixed, setprecision())

// ДИРЕКТИВА ПРОСТРАНСТВА ИМЕН
using namespace std;      // Разрешаем использовать имена из стандартного пространства без префикса std::

// ФУНКЦИЯ ДЛЯ ЗАПОЛНЕНИЯ МАССИВА СЛУЧАЙНЫМИ ЧИСЛАМИ
void fillArray(int arr[], int size, int min, int max) {  // Объявление функции с 4 параметрами
    for (int i = 0; i < size; i++) {       // Цикл for от 0 до size-1 (проходим все элементы массива)
        arr[i] = rand() % (max - min + 1) + min;  // Генерируем случайное число в диапазоне [min, max]
    }                                       // Конец цикла for
}

// ФУНКЦИЯ ДЛЯ ВЫВОДА ЧАСТИ МАССИВА (ПЕРВЫЕ И ПОСЛЕДНИЕ ЭЛЕМЕНТЫ)
void printArraySample(int arr[], int size, int sampleSize) {  // Объявление функции с 3 параметрами
    cout << "Первые " << sampleSize << " элементов: ";  // Выводим заголовок для первых элементов
    for (int i = 0; i < sampleSize; i++) {   // Цикл от 0 до sampleSize-1 (первые sampleSize элементов)
        cout << arr[i] << " ";               // Выводим i-й элемент и пробел
    }                                        // Конец цикла for
    cout << endl;                            // Переход на новую строку после вывода первых элементов
    
    cout << "Последние " << sampleSize << " элементов: ";  // Выводим заголовок для последних элементов
    for (int i = size - sampleSize; i < size; i++) {  // Цикл от (size-sampleSize) до size-1
        cout << arr[i] << " ";               // Выводим i-й элемент и пробел
    }                                        // Конец цикла for
    cout << endl;                            // Переход на новую строку после вывода последних элементов
}

// ФУНКЦИЯ СОРТИРОВКИ ВЫБОРОМ ПО ВОЗРАСТАНИЮ
void selectionSort(int arr[], int size) {    // Объявление функции сортировки с 2 параметрами
    for (int i = 0; i < size - 1; i++) {     // Внешний цикл: проходим по всем элементам кроме последнего
        int minIndex = i;                     // Предполагаем, что минимальный элемент имеет индекс i
        for (int j = i + 1; j < size; j++) {  // Внутренний цикл: ищем минимальный элемент в неотсортированной части
            if (arr[j] < arr[minIndex]) {     // Если текущий элемент меньше предполагаемого минимума
                minIndex = j;                  // Обновляем индекс минимального элемента
            }                                 // Конец условия if
        }                                     // Конец внутреннего цикла for
        if (minIndex != i) {                  // Если минимальный элемент не на своем месте
            int temp = arr[i];                // Сохраняем значение arr[i] во временной переменной
            arr[i] = arr[minIndex];           // Заменяем arr[i] на найденный минимальный элемент
            arr[minIndex] = temp;             // Заменяем бывший минимальный элемент на сохраненное значение
        }                                     // Конец условия if
    }                                         // Конец внешнего цикла for
}

// ФУНКЦИЯ ДЛЯ ПРОВЕРКИ ОТСОРТИРОВАННОСТИ МАССИВА
bool isSorted(int arr[], int size) {         // Объявление функции, возвращающей булево значение (true/false)
    for (int i = 0; i < size - 1; i++) {     // Цикл от 0 до size-2 (проверяем все пары элементов)
        if (arr[i] > arr[i + 1]) {           // Если текущий элемент больше следующего
            return false;                     // Массив не отсортирован, возвращаем false
        }                                     // Конец условия if
    }                                         // Конец цикла for
    return true;                              // Если не найдено нарушений, массив отсортирован, возвращаем true
}

// ГЛАВНАЯ ФУНКЦИЯ ПРОГРАММЫ
int main() {                                  // Начало выполнения программы
    // ИНИЦИАЛИЗАЦИЯ ГЕНЕРАТОРА СЛУЧАЙНЫХ ЧИСЕЛ
    srand(time(0));                           // Устанавливаем начальное значение (seed) для rand()
                                              // time(0) возвращает текущее время в секундах
    
    // ОПРЕДЕЛЕНИЕ КОНСТАНТ
    const int SIZE = 1000;                    // Константа для размера массива (1000 элементов)
    const int SAMPLE_SIZE = 10;               // Константа для количества выводимых элементов (первые и последние 10)
    
    // ОБЪЯВЛЕНИЕ ПЕРЕМЕННЫХ
    int sequence[SIZE];                       // Объявление массива целых чисел размером 1000
    
    // ЗАДАНИЕ ДИАПАЗОНА ЗНАЧЕНИЙ
    const int MIN_VALUE = 1;                  // Минимальное значение для случайных чисел
    const int MAX_VALUE = 10000;              // Максимальное значение для случайных чисел
    
    // ЗАПОЛНЕНИЕ МАССИВА СЛУЧАЙНЫМИ ЧИСЛАМИ
    fillArray(sequence, SIZE, MIN_VALUE, MAX_VALUE);  // Вызов функции fillArray для заполнения массива
    
    // ВЫВОД ИНФОРМАЦИИ О ПРОГРАММЕ
    cout << "=== СОРТИРОВКА ПОСЛЕДОВАТЕЛЬНОСТИ ИЗ " << SIZE << " ЧИСЕЛ ===" << endl;
    cout << "Диапазон значений: от " << MIN_VALUE << " до " << MAX_VALUE << endl;
    
    // ВЫВОД ИСХОДНОЙ ПОСЛЕДОВАТЕЛЬНОСТИ (ВЫБОРКА)
    cout << "\nИсходная последовательность (выборка):" << endl;
    printArraySample(sequence, SIZE, SAMPLE_SIZE);  // Вызов функции для вывода первых и последних 10 элементов
    
    // ПРОВЕРКА ОТСОРТИРОВАННОСТИ ИСХОДНОГО МАССИВА
    cout << "\nПроверка исходного массива: ";
    if (isSorted(sequence, SIZE)) {           // Вызов функции проверки отсортированности
        cout << "отсортирован" << endl;       // Если функция вернула true
    } else {                                  // Если функция вернула false
        cout << "не отсортирован" << endl;    // Выводим "не отсортирован"
    }                                         // Конец условия if-else
    
    // НАЧАЛО СОРТИРОВКИ
    cout << "\nНачинаем сортировку выбором..." << endl;
    
    // ЗАМЕР ВРЕМЕНИ ВЫПОЛНЕНИЯ СОРТИРОВКИ
    clock_t startTime = clock();              // Запоминаем текущее время процессора в тактах
    selectionSort(sequence, SIZE);            // Вызываем функцию сортировки выбором
    clock_t endTime = clock();                // Запоминаем время после завершения сортировки
    
    // ВЫЧИСЛЕНИЕ ВРЕМЕНИ ВЫПОЛНЕНИЯ
    double timeTaken = double(endTime - startTime) / CLOCKS_PER_SEC;  // Переводим разницу в секунды
    
    // ВЫВОД ОТСОРТИРОВАННОЙ ПОСЛЕДОВАТЕЛЬНОСТИ (ВЫБОРКА)
    cout << "\nОтсортированная последовательность (выборка):" << endl;
    printArraySample(sequence, SIZE, SAMPLE_SIZE);  // Вызов функции для вывода первых и последних 10 элементов
    
    // ПРОВЕРКА ОТСОРТИРОВАННОСТИ МАССИВА ПОСЛЕ СОРТИРОВКИ
    cout << "\nПроверка отсортированного массива: ";
    if (isSorted(sequence, SIZE)) {           // Проверяем, действительно ли массив отсортирован
        cout << "отсортирован" << endl;       // Если да
    } else {                                  // Если нет
        cout << "не отсортирован" << endl;    // Выводим сообщение об ошибке
    }                                         // Конец условия if-else
    
    // ВЫВОД СТАТИСТИКИ
    cout << "\n=== СТАТИСТИКА ===" << endl;
    cout << "Время сортировки: " << fixed << setprecision(5) << timeTaken << " секунд" << endl;
    cout << "Минимальное значение: " << sequence[0] << endl;      // Первый элемент после сортировки - минимальный
    cout << "Максимальное значение: " << sequence[SIZE - 1] << endl;  // Последний элемент - максимальный
    cout << "Медиана: " << sequence[SIZE / 2] << endl;            // Средний элемент (медиана)
    
    // ВОЗМОЖНОСТЬ ВЫВОДА ПОЛНОГО ОТСОРТИРОВАННОГО МАССИВА
    char showAll;                              // Объявление переменной для хранения ответа пользователя
    cout << "\nПоказать полный отсортированный массив? (y/n): ";
    cin >> showAll;                            // Считываем ответ пользователя
    
    if (showAll == 'y' || showAll == 'Y') {    // Если пользователь ввел 'y' или 'Y'
        cout << "\nПолный отсортированный массив:" << endl;
        for (int i = 0; i < SIZE; i++) {       // Цикл по всем 1000 элементам
            cout << setw(5) << sequence[i];    // Выводим элемент с шириной 5 символов
            if ((i + 1) % 10 == 0) {           // Если вывели 10 элементов в текущей строке
                cout << endl;                  // Переходим на новую строку
            }                                  // Конец условия if
        }                                      // Конец цикла for
    }                                          // Конец условия if
    
    return 0;                                  // Завершение программы с кодом 0 (успех)
}                                              // Конец функции main
